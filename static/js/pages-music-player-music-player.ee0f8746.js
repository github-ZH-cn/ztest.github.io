(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-music-player-music-player"],{"078d":function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.getSongLyric=e.getSongDetail=void 0;var a=i(n("75cb")),r=function(t){return a.default.get("/song/detail",{ids:t})};e.getSongDetail=r;var s=function(t){return a.default.get("/lyric",{id:t})};e.getSongLyric=s},"13c8":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={songDetailHeader:n("f039").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"nusic-player"},[t.isShowSwiper?n("v-uni-image",{staticClass:"bg-image",attrs:{src:t.currentSong.al.picUrl,mode:"aspectFill"}}):t._e(),n("v-uni-view",{staticClass:"bg-cover"}),n("song-detail-header",{scopedSlots:t._u([{key:"center",fn:function(){return[n("v-uni-view",{staticClass:"tab"},[n("v-uni-view",{class:{active:0===t.currentIndex}},[t._v("歌曲")]),n("v-uni-view",{staticClass:"divider"},[t._v("|")]),n("v-uni-view",{class:{active:1===t.currentIndex}},[t._v("歌词")])],1)]},proxy:!0}])}),t.isShowSwiper?n("v-uni-view",[n("v-uni-swiper",{staticClass:"content",style:{height:t.contentHeight+"px"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperChangeItem.apply(void 0,arguments)}}},[n("v-uni-swiper-item",{staticClass:"music"},[n("v-uni-view",{staticClass:"album"},[n("v-uni-image",{staticClass:"icon",attrs:{src:t.currentSong.al.picUrl,mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"info"},[n("v-uni-view",{staticClass:"title"},[t._v(t._s(t.currentSong.al.name))]),n("v-uni-view",{staticClass:"subtitle"},[n("v-uni-view",{staticClass:"singer"},[t._v(t._s(t.currentSong.ar[0].name))]),n("v-uni-view",{staticClass:"alias"},[t._v("专辑"+t._s(t.currentSong.alia[0]))])],1)],1),n("v-uni-view",{staticClass:"lyric"},[t._v(t._s(t.currentLyricInfo))]),n("v-uni-view",{staticClass:"progress"},[n("v-uni-slider",{staticClass:"slider",attrs:{"block-size":15,activeColor:"#0f0",value:t.sliderValue}}),n("v-uni-view",{staticClass:"time"},[n("v-uni-view",{staticClass:"current"},[t._v(t._s(t._f("durationTime")(t.currentTime)))]),n("v-uni-view",{staticClass:"duration"},[t._v(t._s(t._f("durationTime")(t.durationTime)))])],1)],1),n("v-uni-view",{staticClass:"operation"},[n("v-uni-image",{staticClass:"btn btn-mode",attrs:{src:"/static/images/player/play_order.png",mode:"widthFix"}}),n("v-uni-image",{staticClass:"btn btn-prev",attrs:{src:"/static/images/player/play_prev.png",mode:"widthFix"}}),[n("v-uni-image",{staticClass:"btn btn-pause",attrs:{src:"/static/images/player/play_pause.png",mode:"widthFix"}})],n("v-uni-image",{staticClass:"btn btn-next",attrs:{src:"/static/images/player/play_next.png",mode:"widthFix"}}),n("v-uni-image",{staticClass:"btn btn-music",attrs:{src:"/static/images/player/play_music.png",mode:"widthFix"}})],2)],1),n("v-uni-swiper-item",[t._v("2")])],1)],1):t._e()],1)},r=[]},"1bc8":function(t,e,n){"use strict";n.r(e);var i=n("13c8"),a=n("210c");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("52b2");var s,c=n("f0c5"),o=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"fbe4091e",null,!1,i["a"],s);e["default"]=o.exports},"210c":function(t,e,n){"use strict";n.r(e);var i=n("7d96"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"40e0":function(t,e,n){"use strict";var i=n("4ea4");n("ac1f"),n("5319"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.parseLyric=s;var a=i(n("b85c")),r=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;function s(t){var e,n=t.split("\n"),i=[],s=(0,a.default)(n);try{for(s.s();!(e=s.n()).done;){var c=e.value,o=r.exec(c);if(o){var u=60*o[1]*1e3,l=1e3*o[2],d=o[3],f=2===d.length?10*d:1*d,v=u+l+f,p=c.replace(r,"");i.push({time:v,text:p})}}}catch(g){s.e(g)}finally{s.f()}return i}},"430f":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"nav"},[i("v-uni-view",{staticClass:"navigation-bar",style:{height:t.navigatorHeight+"px"}}),i("v-uni-view",{staticClass:"nav-bar"},[i("v-uni-view",{staticClass:"left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoBack.apply(void 0,arguments)}}},[t._t("left",[i("v-uni-view",{staticClass:"left-arrow"},[i("v-uni-image",{staticClass:"icon",attrs:{src:n("e722"),mode:"widthFix"}})],1)])],2),i("v-uni-view",{staticClass:"center"},[t._t("center")],2),i("v-uni-view",{staticClass:"right"},[t._t("left")],2)],1)],1)},r=[]},"52b2":function(t,e,n){"use strict";var i=n("5c94"),a=n.n(i);a.a},"5c94":function(t,e,n){var i=n("5e15");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("411abbf8",i,!0,{sourceMap:!1,shadowMode:!1})},"5e15":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* uni.scss */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-fbe4091e]{color:#fff}.nusic-player .bg-image[data-v-fbe4091e],\r\n.nusic-player .bg-cover[data-v-fbe4091e]{position:fixed;left:0;top:0;width:100%;height:100%;z-index:-1}.nusic-player .bg-cover[data-v-fbe4091e]{background-color:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(30px);backdrop-filter:blur(30px)}.nusic-player .tab[data-v-fbe4091e]{display:flex;font-size:%?28?%;color:#fff}.nusic-player .tab .divider[data-v-fbe4091e]{margin:0 %?15?%}.nusic-player .tab .active[data-v-fbe4091e]{color:#00b26a}.nusic-player .content .music[data-v-fbe4091e]{display:flex;flex-direction:column;justify-content:space-between;box-sizing:border-box;padding:%?30?% %?60?%\r\n  /* 歌词 */\r\n  /* 进度 */\r\n  /* 操作按钮 */}.nusic-player .content .music .album[data-v-fbe4091e]{display:flex;align-items:center;flex:5}.nusic-player .content .music .info[data-v-fbe4091e]{margin:%?20?% 0}.nusic-player .content .music .info .title[data-v-fbe4091e]{font-size:%?48?%;font-weight:700}.nusic-player .content .music .info .subtitle .singer[data-v-fbe4091e],\r\n.nusic-player .content .music .info .subtitle .slbum[data-v-fbe4091e]{font-size:%?26?%;color:#fff;margin:%?16?% 0}.nusic-player .content .music .lyric[data-v-fbe4091e]{flex:1;display:flex;align-items:center;justify-content:center;font-size:%?28?%;color:#0f0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.nusic-player .content .music .progress .slider[data-v-fbe4091e]{margin:%?20?% 0 %?20?% %?18?%}.nusic-player .content .music .progress .time[data-v-fbe4091e]{display:flex;justify-content:space-between;font-size:%?24?%;color:#fff}.nusic-player .content .music .operation[data-v-fbe4091e]{display:flex;justify-content:space-between;align-items:center;margin:%?20?% 0 %?30?%}.nusic-player .content .music .operation .btn[data-v-fbe4091e]{display:inline-block;width:%?60?%;height:%?60?%;padding:0}.nusic-player .content .music .operation .btn-pause[data-v-fbe4091e]{width:%?90?%;height:%?90?%}',""]),t.exports=e},"7d96":function(t,e,n){"use strict";var i=n("4ea4");n("4d90"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("5530")),r=n("078d"),s=n("26cb"),c=n("40e0"),o={name:"music-player",data:function(){return{id:"",currentSong:null,durationTime:0,contentHeight:getApp().globalData.contentHeight-44,currentIndex:0,sliderValue:0,isShowSwiper:!1,currentTime:0,currentLyricIndex:0,currentLyricInfo:"",lyricInfos:[]}},onLoad:function(t){this.id=t.id,this.getPageData(),this.audioContext.stop(),this.audioContext.src="https://music.163.com/song/media/outer/url?id=".concat(this.id,".mp3"),this.audioContext.autoplay=!0,this.setupAudioContextListener()},methods:{swiperChangeItem:function(t){this.currentIndex=t.detail.current},getPageData:function(){var t=this;(0,r.getSongDetail)(this.id).then((function(e){200===e.statusCode&&(t.isShowSwiper=!0,t.currentSong=e.data.songs[0],t.durationTime=e.data.songs[0].dt)})),(0,r.getSongLyric)(this.id).then((function(e){var n=e.data.lrc.lyric,i=(0,c.parseLyric)(n);t.lyricInfos=i}))},setupAudioContextListener:function(){this.getH5WxData()},getPlayerAppPlus:function(){var t=this;this.audioContext.onCanplay((function(){t.audioContext.play()})),this.audioContext.onTimeUpdate((function(){var e=1e3*t.audioContext.currentTime;t.currentTime=e;var n=e/t.durationTime*100;if(t.sliderValue=n,t.lyricInfos.length){for(var i=0;i<t.lyricInfos.length;i++){var a=t.lyricInfos[i];if(e<a.time)break}var r=i-1;if(t.currentLyricIndex!==r){var s=t.lyricInfos[r];t.currentLyricIndex=r,t.currentLyricInfo=s.text,console.log(t.currentLyricIndex),console.log(t.currentLyricInfo)}}}))},getH5WxData:function(){var t=this;this.audioContext.onPlay((function(){t.audioContext.play()})),this.audioContext.onTimeUpdate((function(){var e=1e3*t.audioContext.currentTime;t.currentTime=e;var n=e/t.durationTime*100;if(t.sliderValue=n,t.lyricInfos.length){for(var i=0;i<t.lyricInfos.length;i++){var a=t.lyricInfos[i];if(e<a.time)break}var r=i-1;if(t.currentLyricIndex!==r){var s=t.lyricInfos[r];t.currentLyricIndex=r,t.currentLyricInfo=s.text,console.log(t.currentLyricIndex),console.log(t.currentLyricInfo)}}}))}},computed:(0,a.default)({},(0,s.mapState)({audioContext:function(t){return t.audioContext}})),filters:{durationTime:function(t){t/=1e3;var e=Math.floor(t/60)+"",n=Math.floor(t%60)+"";return e.padStart(2,"0")+":"+n.padStart(2,"0")}}};e.default=o},8457:function(t,e,n){"use strict";n.r(e);var i=n("ddaa"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"97a7":function(t,e,n){"use strict";var i=n("ceae"),a=n.n(i);a.a},a14e:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* uni.scss */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-356a7eb4]{background-color:initial}.nav .nav-bar[data-v-356a7eb4]{display:flex;height:44px}.nav .nav-bar .left[data-v-356a7eb4],\r\n.nav .nav-bar .right[data-v-356a7eb4]{display:flex;align-items:center;justify-content:center;width:%?120?%}.nav .nav-bar .left .left-arrow .icon[data-v-356a7eb4]{width:%?44?%}.nav .nav-bar .center[data-v-356a7eb4]{flex:1;display:flex;align-items:center;justify-content:center}body.?%PAGE?%[data-v-356a7eb4]{background-color:initial}',""]),t.exports=e},b85c:function(t,e,n){"use strict";n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=a(n("06c5"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=(0,i.default)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){o=!0,s=t},f:function(){try{c||null==n["return"]||n["return"]()}finally{if(o)throw s}}}}},ceae:function(t,e,n){var i=n("a14e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("9cf56d22",i,!0,{sourceMap:!1,shadowMode:!1})},ddaa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"song-detail-header",data:function(){return{navigatorHeight:getApp().globalData.globalNavigationHeight}},methods:{gotoBack:function(){uni.navigateBack()}}};e.default=i},e722:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAB7FJREFUeF7tnXesFFUYxc+NxmiMJZZYYiyxxGiMJcYSe++9gAVUFFAJSkBCUAIhWAiiCMEC9l5Cx95777333jso5ZgbP5MNPh6z583suzPz7d/3d/fOOb+d2fdmZybAX7VOINR6633j4QLUXAIXwAWoeQI133zfA7gANU+g5pvvewAXoOYJ1HzzfQ/gAtQ8gZpvvu8BXICaJ1Dzzfc9gAtQ8wQK2HySw0IIwwuYOvcpfQ+Qc6QkY/FDAZwZQjgv5+lzn84FyDFSkiMADGmYckAI4cIc3yL3qVyAnCIleU781LcxXd8Qwvic3ib3aVyAHCIleS6Awe1M1TuEMDGHt8p9Chegg5GSHAlgUIZpeoQQrs4wrqVDXIAOxE1yFICBTUzRLYRwQxPjCx/qAogRkxwNYICAdwkh3CZwhSAugBAryQsA9BfQSQCODCFQYAtBXIAmYyU5BkC/JrE4fLKVP19gC0NcgCaiJTkWwGlNIP8NnWLlzxPYQhEXIGO8JMcB6JtxeOOwqVb+XIEtHHEBMkRMMv4jp0+GoQsOmWblzxHYliAuwCJiJnkJgFOENqZb+X8LbMsQF6CdqEleBqC30MYMK/8vgW0p4gIsJG6SEwD0EtqYaeXPFtiWIy5AG5GTvBzASUIbt1v5swS2UxAXYIHYSV4JoIfQxh1W/p8C22mIC9AQPcl4suZ4oY07rfw/BLZTERfA4id5DYDjhDbusvJ/F9hOR1wAACSvA9BNaONuK/83gU0Cqb0AJOPp2WOENu6x8n8V2GSQWgtA8kYARwtt3Gvl/yKwSSG1FYDkzQC6Cm3cZ+X/LLDJIbUUgOStsUShjfut/J8ENkmkVgKQjNsbf41zuNDGA1b+jwKbLFIbAUguBiB+8g8T2njQyv9BYJNGaiEAycXtk3+I0MZDVv73Aps8UnkBSC5h5R8ktPGwlf+dwJYCqbQAJJe03f6BQhuPWPnfCmxpkMoKQHIp++TvL7TxqJX/jcCWCqmkACSXtvL3Fdp4zMr/WmBLh1ROAJLLWPl7C208buV/JbClRColAMnl7Ji/l9DGE1b+lwJbWqQyApBc3j75ewhtPGnlfyGwpUYqIQDJFaz83YQ2nrLyPxfY0iOlF4DkSlb+LkIbT1v5nwlsJZBSC0ByZSt/Z6GNZ6z8TwW2MkhpBSC5ipW/o9DGs1b+JwJbKaSUApBczcrfXmjjOSv/Y4GtHFI6AUiubuVvJ7TxvJX/kcBWEimVACTXsPK3Fdp4wcr/UGAri5RGAJJrWvlbC228aOV/ILCVRkohAMm17T98WwltvGTlvy+wlUeSF4DkOvbJ31Jo42Ur/z2BrQWStAAk17XytxDaeMXKf1dga4MkKwDJ9a38zYQ2XrXy3xHYWiFJCkByAyt/U6GN16z8twW2dkhyApDc0MrfRGjjdSv/LYGtJZKUACQ3svI3Ftp4w8p/U2Bri7gAta3+3w1PSoC4ID8EtNbI5AQwCfxLYIs8SFIAk2A9+z6wuZCF/xmYMbRkBTAJ/B9BGYtUhyUtgEng/wpW283AJS+ASbCWHQ78ZFCGUpsZUgoBTIJ4Ojhe3r1NMxtoY/108EJCK40AJoH/IESwvz2kVAKYBP6TsBwlKJ0AJsGq9p1gByEL/1FoQ2ilFMAkiD8Lj98JdhIk8J+FW2ilFcAk8AtDBPsbkVILYBKsaIeDXYUs/NIwIbTkELs4NB4OdhcW5xeHCqElh9jl4VGCPYXF+eXhQmjJISSXtcOB3yAiYzul/w6w4HbaLWLinmCfjBk0DvNbxAihJYfYTaKiBPsJi/ObRAmhJYfYbeKiBAcIi/PbxAmhJYf4jSIXXUnlvgO08Z0g3io27gkOXnQc/xvht4oVQksOsZtFRwkOFRbnN4sWQksO8dvFt11J5Q8BjZttD4yIe4IjBEP9gRFCaEkiJG8B0EVYnD8yRggtSYTkTQCOEhbnD40SQksS8cfGJXhpWKtNIXk9gGOF9/UHRwqhJYmQvBZAd2Fx/uhYIbQkkQ48OdwfHp1ko8KiSF4F4AQB9cfHC6EliZC8AsCJwuLusBtU/CmwnYbU6h9BWVMmORFAz6zjG8bdbhLMEthOQVyAhcROcgKAXkIrM02C2QLbcsQFaCdykpcCOFloZYZJ8JfAthRxARYRN8mLAZwqtDLdJPhbYFuGuAAZoiY5HkCfDEMXHDLNJJgjsC1BXICMMZMcB6BvxuGNw6aaBHMFtnDEBWgiYpIXATi9CeS/oVNMgnkCWyjiAjQZL8kxAPo1icXhk02C+QJbGOICCNGSvABAfwGdZBJQYAtBXAAxVpLnAzhDwLuGEOKvkpJ4uQAdqIHkKAADm5iiewghnn5O5uUCdLAKkiMBDMowTc8QQjzPkNTLBcihDpLnAhjczlR9QgiX5PBWuU/hAuQUKcmzAZzVxnT9Qghjc3qb3KdxAXKMlOQIAEMaphwYQhid41vkPpULkHOkJIcDGBr3BiGEeGhI+uUCFFAPyWEhhChC8i8XIPmKil2gC1BsvsnP7gIkX1GxC3QBis03+dldgOQrKnaBLkCx+SY/uwuQfEXFLtAFKDbf5Gd3AZKvqNgFugDF5pv87C5A8hUVu0AXoNh8k5/dBUi+omIX6AIUm2/ys/8Dg1RGn1afaqIAAAAASUVORK5CYII="},f039:function(t,e,n){"use strict";n.r(e);var i=n("430f"),a=n("8457");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("97a7");var s,c=n("f0c5"),o=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"356a7eb4",null,!1,i["a"],s);e["default"]=o.exports}}]);